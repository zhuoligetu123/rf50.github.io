<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Measurement Update
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Kalman Filters
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Overview.html">
       01. Overview
      </a>
     </li>
     <li class="">
      <a href="02. What's a Kalman Filter.html">
       02. What's a Kalman Filter?
      </a>
     </li>
     <li class="">
      <a href="03. History.html">
       03. History
      </a>
     </li>
     <li class="">
      <a href="04. Applications.html">
       04. Applications
      </a>
     </li>
     <li class="">
      <a href="05. Variations.html">
       05. Variations
      </a>
     </li>
     <li class="">
      <a href="06. Robot Uncertainty.html">
       06. Robot Uncertainty
      </a>
     </li>
     <li class="">
      <a href="07. Kalman Filter Advantage.html">
       07. Kalman Filter Advantage
      </a>
     </li>
     <li class="">
      <a href="08. 1D Gaussian.html">
       08. 1D Gaussian
      </a>
     </li>
     <li class="">
      <a href="09. Designing 1D Kalman Filters.html">
       09. Designing 1D Kalman Filters
      </a>
     </li>
     <li class="">
      <a href="10. Measurement Update.html">
       10. Measurement Update
      </a>
     </li>
     <li class="">
      <a href="11. State Prediction.html">
       11. State Prediction
      </a>
     </li>
     <li class="">
      <a href="12. 1D Kalman Filter.html">
       12. 1D Kalman Filter
      </a>
     </li>
     <li class="">
      <a href="13. Multivariate Gaussian.html">
       13. Multivariate Gaussian
      </a>
     </li>
     <li class="">
      <a href="14. Intro to Multidimensional KF.html">
       14. Intro to Multidimensional KF
      </a>
     </li>
     <li class="">
      <a href="15. Design of Multidimensional KF.html">
       15. Design of Multidimensional KF
      </a>
     </li>
     <li class="">
      <a href="16. Introduction to EKF.html">
       16. Introduction to EKF
      </a>
     </li>
     <li class="">
      <a href="17. EKF.html">
       17. EKF
      </a>
     </li>
     <li class="">
      <a href="18. EKF Example.html">
       18. EKF Example
      </a>
     </li>
     <li class="">
      <a href="19. Recap.html">
       19. Recap
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          10. Measurement Update
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h4 id="mean-calculation">
          Mean Calculation
         </h4>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Measurement Update
         </p>
        </h3>
        <video controls="">
         <source src="10. Measurement Update-OaLfGr8xx9Q.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="10. Measurement Update-OaLfGr8xx9Q.en.vtt" srclang="en"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          <code>
           &lt;span class="mathquill ud-math"&gt;\mu&lt;/span&gt;
          </code>
          : Mean of the prior belief
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;\sigma^{2}&lt;/span&gt;
          </code>
          : Variance of the prior belief
          <br/>
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;v&lt;/span&gt;
          </code>
          : Mean of the measurement
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;r^{2}&lt;/span&gt;
          </code>
          : Variance of the measurement
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h4 id="new-belief-quiz">
          New Belief Quiz
         </h4>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/c2l2-a10-measurement-update-in-1d-quiz.00-00-46-29.still001.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <form>
          <fieldset>
           <legend>
            <p>
             Where do you think the robot's new belief will be?
            </p>
           </legend>
          </fieldset>
          <div>
           <input id="a1516843604221" name="515587" type="radio" value="a1516843604221"/>
           <label for="a1516843604221">
            <p>
             A
            </p>
           </label>
          </div>
          <div>
           <input id="a1516843635362" name="515587" type="radio" value="a1516843635362"/>
           <label for="a1516843635362">
            <p>
             B
            </p>
           </label>
          </div>
          <div>
           <input id="a1516843636812" name="515587" type="radio" value="a1516843636812"/>
           <label for="a1516843636812">
            <p>
             C
            </p>
           </label>
          </div>
         </form>
         <details>
          <summary>
           <strong>
            SOLUTION:
           </strong>
          </summary>
          A
         </details>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Measurement Update In 1D (Post Quiz)
         </p>
        </h3>
        <video controls="">
         <source src="10. Measurement Update In 1D (Post Quiz) -cKEVFynbJfs.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="10. Measurement Update In 1D (Post Quiz) -cKEVFynbJfs.en.vtt" srclang="en"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          The new mean is a weighted sum of the prior belief and measurement means. With uncertainty, a larger number represents a more uncertain probability distribution. However, the new mean should be biased towards the measurement update, which has a smaller standard deviation than the prior. How do we accomplish this?
         </p>
         <div class="mathquill">
          \large \mu' = \frac{r^2 \mu + \sigma^2 v}{r^2 + \sigma^2}
         </div>
         <p>
          The answer is - the uncertainty of the prior is multiplied by the mean of the measurement, to give it more weight, and similarly the uncertainty of the measurement is multiplied with the mean of the prior. Applying this formula to our example generates a new mean of 27.5, which we can label on our graph below.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/c2l2-graph-1-v1.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h4 id="variance-calculation">
          Variance Calculation
         </h4>
         <p>
          Next, we need to determine the variance of the new state estimate.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <form>
          <fieldset>
           <legend>
            <p>
             What do you think? Would the variance of the new state estimate be less confident than our prior, in between our prior and measurement, or more confident than our measurement?
            </p>
           </legend>
          </fieldset>
          <div>
           <input id="a1515193618121" name="498547" type="radio" value="a1515193618121"/>
           <label for="a1515193618121">
            <p>
             Less confident than our prior.
            </p>
           </label>
          </div>
          <div>
           <input id="a1515193623348" name="498547" type="radio" value="a1515193623348"/>
           <label for="a1515193623348">
            <p>
             A confidence in between our prior and measurement.
            </p>
           </label>
          </div>
          <div>
           <input id="a1515193623955" name="498547" type="radio" value="a1515193623955"/>
           <label for="a1515193623955">
            <p>
             More confident than our measurement.
            </p>
           </label>
          </div>
         </form>
         <details>
          <summary>
           <strong>
            SOLUTION:
           </strong>
          </summary>
          More confident than our measurement.
         </details>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          The two Gaussians provide us with more information together than either Gaussian offered alone. As a result, our new state estimate is more confident than our prior belief and our measurement. This means that it has a higher peak and is narrower. You can see this in the graph below.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/c2l2-graph-2.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          The formula for the new variance is presented below.
         </p>
         <div class="mathquill">
          \large \sigma^{2'} = \frac{1}{\frac{1}{r^2} + \frac{1}{\sigma^2}}
         </div>
         <p>
          Entering the variances from our example into this formula produces a new variance of 2.25. The new state estimate, often called the posterior, is drawn below.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/c2l2-graph-3.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          <code>
           &lt;span class="mathquill ud-math"&gt;\mu&lt;/span&gt;
          </code>
          : Mean of the prior belief
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;\sigma^{2}&lt;/span&gt;
          </code>
          : Variance of the prior belief
          <br/>
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;v&lt;/span&gt;
          </code>
          : Mean of the measurement
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;r^{2}&lt;/span&gt;
          </code>
          : Variance of the measurement
          <br/>
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;\tau&lt;/span&gt;
          </code>
          : Mean of the posterior
          <br/>
          <br/>
          <br/>
          <code>
           &lt;span class="mathquill ud-math"&gt;s^{2}&lt;/span&gt;
          </code>
          : Variance of the posterior
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          It’s time to implement these two formulas in C++. Place your code within a function called measurement_update, such that you can use it as a building block in your Kalman Filter implementation.
         </p>
         <p>
          When you’re done, calculate the posterior mean and variance for a prior of
          <span class="mathquill ud-math">
           N(x: μ_1=10, σ^2=8)
          </span>
          and measurement
          <span class="mathquill ud-math">
           N(x: μ_2=13, σ^2=2)
          </span>
          . Is it what you expected?
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h4 id="programming-quiz">
          Programming Quiz
         </h4>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          In this C++ code, the
          <strong>
           measurement update
          </strong>
          function returns two values: the newly computed mean and variance. Usually, a
          <code>
           tuple
          </code>
          or
          <code>
           struct
          </code>
          should be used in C++ to return more than one value from a function and easily assign them later to multiple variables. For more information on
          <code>
           tuples
          </code>
          and
          <code>
           structs
          </code>
          take a look at this
          <a href="https://dzone.com/articles/returning-multiple-values-from-functions-in-c" rel="noopener noreferrer" target="_blank">
           link
          </a>
          .
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h4>
          Start Quiz:
         </h4>
         <div>
          <div class="nav nav-tabs nav-fill" id="question-tabs" role="tablist">
           <a aria-controls="464452-main-cpp" aria-selected="true" class="nav-item nav-link active show" data-toggle="tab" href="#464452-main-cpp" id="tab-464452-main-cpp" role="tab">
            main.cpp
           </a>
           <a aria-controls="464452-solution-cpp" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#464452-solution-cpp" id="tab-464452-solution-cpp" role="tab">
            solution.cpp
           </a>
          </div>
          <div class="tab-content" id="question-tab-contents" style="padding: 20px 0;">
           <div aria-labelledby="tab-464452-main-cpp" class="tab-pane active show" id="464452-main-cpp" role="tabpanel">
            <pre><code></code>#include &lt;iostream&gt;
#include &lt;math.h&gt;
#include &lt;tuple&gt;

using namespace std;

double new_mean, new_var;

tuple&lt;double, double&gt; measurement_update(double mean1, double var1, double mean2, double var2)
{
    new_mean = //TODO: Code the measurment update mean function mu;
    new_var =  //TODO: Code the measurment update variance function sigma square;
    return make_tuple(new_mean, new_var);
}

int main()
{

    tie(new_mean, new_var) = measurement_update(10, 8, 13, 2);
    printf("[%f, %f]", new_mean, new_var);
    return 0;
}</pre>
           </div>
           <div aria-labelledby="tab-464452-solution-cpp" class="tab-pane" id="464452-solution-cpp" role="tabpanel">
            <pre><code></code>#include &lt;iostream&gt;
#include &lt;math.h&gt;
#include &lt;tuple&gt;

using namespace std;

double new_mean, new_var;

tuple&lt;double, double&gt; measurement_update(double mean1, double var1, double mean2, double var2)
{
    new_mean = (var2 * mean1 + var1 * mean2) / (var1 + var2);
    new_var = 1 / (1 / var1 + 1 / var2);
    return make_tuple(new_mean, new_var);
}

int main()
{

    tie(new_mean, new_var) = measurement_update(10, 8, 13, 2);
    printf("[%f, %f]", new_mean, new_var);
    return 0;
}</pre>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          I encourage you to think about what the posterior Gaussian would look like for the following example, and even calculate the exact values using your measurement_update function.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/c2l2-graph-4-v2.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="11. State Prediction.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('10. Measurement Update')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
